<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create itol.unit — create_unit • itol.toolkit</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create itol.unit — create_unit"><meta name="description" content="Create itol.unit from simple input in R environment."><meta property="og:description" content="Create itol.unit from simple input in R environment."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">itol.toolkit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.11</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/Get_Start.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-single-functions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Single Functions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-single-functions"><li><h6 class="dropdown-header" data-toc-skip>Tree Structure</h6></li>
    <li><a class="dropdown-item" href="../articles/COLLAPSE.html">COLLAPSE</a></li>
    <li><a class="dropdown-item" href="../articles/PRUNE.html">PRUNE</a></li>
    <li><a class="dropdown-item" href="../articles/SPACING.html">SPACING</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Theme Style</h6></li>
    <li><a class="dropdown-item" href="../articles/TREE_COLORS.html">TREE_COLORS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_STYLE.html">DATASET_STYLE</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Text</h6></li>
    <li><a class="dropdown-item" href="../articles/LABELS.html">LABELS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_TEXT.html">DATASET_TEXT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_COLORSTRIP.html">DATASET_COLORSTRIP</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Basic Plot</h6></li>
    <li><a class="dropdown-item" href="../articles/DATASET_BINARY.html">DATASET_BINARY</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_GRADIENT.html">DATASET_GRADIENT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_HEATMAP.html">DATASET_HEATMAP</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_SYMBOL.html">DATASET_SYMBOL</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_EXTERNALSHAPE.html">DATASET_EXTERNALSHAPE</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_DOMAINS.html">DATASET_DOMAINS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_SIMPLEBAR.html">DATASET_SIMPLEBAR</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_MULTIBAR.html">DATASET_MULTIBAR</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_BOXPLOT.html">DATASET_BOXPLOT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_LINECHART.html">DATASET_LINECHART</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_PIECHART.html">DATASET_PIECHART</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Plot</h6></li>
    <li><a class="dropdown-item" href="../articles/DATASET_ALIGNMENT.html">DATASET_ALIGNMENT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_CONNECTIONS.html">DATASET_CONNECTIONS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_IMAGE.html">DATASET_IMAGE</a></li>
    <li><a class="dropdown-item" href="../articles/POPUP_INFO.html">POPUP_INFO</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tips" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tips</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tips"><li><a class="dropdown-item" href="../articles/OVERVIEW_TREE_STRUCTURE.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Installation</a></li>
    <li><a class="dropdown-item" href="../articles/Datasets.html">Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/Color_Palette.html">Colors</a></li>
    <li><a class="dropdown-item" href="../articles/Data_Reproduction.html">Data Reproduction</a></li>
    <li><a class="dropdown-item" href="../articles/Comparison_table2itol.html">vs table2itol</a></li>
    <li><a class="dropdown-item" href="../articles/tree_construction.html">Tree Construction</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Version history</h6></li>
    <li><a class="dropdown-item" href="../articles/v1.1.9.html">version 1.1.9</a></li>
    <li><a class="dropdown-item" href="../articles/v1.1.10.html">version 1.1.10</a></li>
    <li><a class="dropdown-item" href="../articles/v1.1.11.html">version 1.1.11</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="https://tongzhou2017.github.io/itol.toolkit-gallery/">Gallery</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/TongZhou2017/itol.toolkit" aria-label="GitHub repository"><span class="fa fa-github"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://discord.com/invite/n5TC7jCfGJ" aria-label="Discord community"><span class="fa fab fa-discord fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/itol_toolkit" aria-label="Twitter profile"><span class="fa fa-twitter"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create itol.unit</h1>

      <div class="d-none name"><code>create_unit.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create itol.unit from simple input in R environment.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_unit</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">key</span>,</span>
<span>  <span class="va">type</span>,</span>
<span>  style <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  subtype <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  color <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  line_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  font_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  size_factor <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  position <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  background_color <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rotation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  shape <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fill <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">tree</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>if type == "COLLAPSE", a vector of characters specifying the tips
or node used for collapsing used for extracting.</p></dd>


<dt id="arg-key">key<a class="anchor" aria-label="anchor" href="#arg-key"></a></dt>
<dd><p>a character specifying the output file name for hub object.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>a character specifying the template type used for extracting.
Following choices are possible: "COLLAPSE","PRUNE","SPACING","TREE_COLORS",
"DATASET_STYLE","LABELS","DATASET_TEXT","DATASET_COLORSTRIP",
"DATASET_BINARY","DATASET_GRADIENT","DATASET_HEATMAP","DATASET_SYMBOL",
"DATASET_EXTERNALSHAPE","DATASET_DOMAINS","DATASET_SIMPLEBAR",
"DATASET_MULTIBAR","DATASET_BOXPLOT","DATASET_LINECHART","DATASET_PIECHART",
"DATASET_ALIGNMENT","DATASET_CONNECTION","DATASET_IMAGE","POPUP_INFO.</p></dd>


<dt id="arg-style">style<a class="anchor" aria-label="anchor" href="#arg-style"></a></dt>
<dd><p>a character specifying the specific version of template type
used for extracting. The default value is "default" style for all types.</p></dd>


<dt id="arg-subtype">subtype<a class="anchor" aria-label="anchor" href="#arg-subtype"></a></dt>
<dd><p>a character specifying the subtype under type. If the type is
"TREE_COLORS", the following choices are possible: "range", "clade",
"branch", "label", "label_background".</p></dd>


<dt id="arg-color">color<a class="anchor" aria-label="anchor" href="#arg-color"></a></dt>
<dd><p>a character specifying the color pattern name. The following
choices are possible: "table2itol", "RColorBrewer", "ggsci".</p></dd>


<dt id="arg-line-type">line_type<a class="anchor" aria-label="anchor" href="#arg-line-type"></a></dt>
<dd><p>a character specifying the normal or dashed line type used
in clade and branch subtype.</p></dd>


<dt id="arg-font-type">font_type<a class="anchor" aria-label="anchor" href="#arg-font-type"></a></dt>
<dd><p>a character specifying the bold, italic, and bold-italic
font type used in label and branch subtype.</p></dd>


<dt id="arg-size-factor">size_factor<a class="anchor" aria-label="anchor" href="#arg-size-factor"></a></dt>
<dd><p>a number specifying the line width used in clade and
branch subtype and size factor in label subtype.</p></dd>


<dt id="arg-position">position<a class="anchor" aria-label="anchor" href="#arg-position"></a></dt>
<dd><p>If type == "DATASET_STYLE", a character
specifying the position: The following choices are possible: "node" and
"clade". If type == "DATASET_TEXT", a number specifying the position of the
text on the tree: -1 = external label; a number between 0 and 1 = internal
label positioned at the specified value along the node branch (for example,
position 0 is exactly at the start of node branch, position 0.5 is in the
middle, and position 1 is at the end)</p></dd>


<dt id="arg-background-color">background_color<a class="anchor" aria-label="anchor" href="#arg-background-color"></a></dt>
<dd><p>Only used while type == "DATASET_STYLE" and subtype
== "label". a character or a vector of character specifying the background
color in hexadecimal, RGB or RGBA notation.</p></dd>


<dt id="arg-rotation">rotation<a class="anchor" aria-label="anchor" href="#arg-rotation"></a></dt>
<dd><p>Only used while type == "DATASET_TEXT". a number or a
vector of number specifying the rotation angle of the text.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>a character specifying the numbric data summarise method. If
type == "DATASET_BINARY", the following choices are possible: "mean",
"sum".</p></dd>


<dt id="arg-shape">shape<a class="anchor" aria-label="anchor" href="#arg-shape"></a></dt>
<dd><p>a character or a vector of character specifying the symbol
shape. If type == "DATASET_BINARY", the default is 2. If type ==
"DATASET_SYMBOL", the following choices are possible: 1 for rectangle, 2
for circle, 3 for star, 4 for left pointing triangle, 5 for right pointing
triangle. If using NULL and there are data column, the functions will
automaticly help users to setup the shapes based on the levels of the
data.</p></dd>


<dt id="arg-fill">fill<a class="anchor" aria-label="anchor" href="#arg-fill"></a></dt>
<dd><p>If type == "DATASET_SYMBOL", 1/0 is specifying the shape
outlier filled or not. If type == "DATASET_DOMAINS", the following choices
are possible: "RE|HH|HV|EL|DI|TR|TL|PL|PR|PU|PD|OC|GP".</p></dd>


<dt id="arg-tree">tree<a class="anchor" aria-label="anchor" href="#arg-tree"></a></dt>
<dd><p>a character specifying Newick format tree file path or a phylo
object of main phylogenetic tree.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a itol.unit object containing</p>
<dl><dt>type</dt>
<dd><p>This group holds information about the template type of
the data only. This is a very critical piece of information. In many
functions of the itol.toolkit package, the template type information is
used to determine the different data processing and input/output methods.</p></dd>


<dt>sep</dt>
<dd><p>This group holds data separator information only.
This is one of the most important parameters for data reading and output.
It is a separate category because it is frequently used and is an input
parameter for other subsequent parameters to be read.</p></dd>


<dt>profile</dt>
<dd><p>This group contains basic information about the
dataset, such as the dataset name and a color label to distinguish the
dataset. The dataset name is extremely important. This parameter is used
almost throughout the data processing of the itol.toolkit package.
With the content of this parameter as the key value, the data and theme
information of the dataset are associated. In turn, high throughput
learning and writing of large-scale data can be achieved. This parameter
is not included in some template types with a particularly simple structure,
so we choose a file name or a user-defined method as the key value.</p></dd>


<dt>field</dt>
<dd><p>This group contains information about each sample
within the dataset, and this type of parameter exists only for multi-sample
data. This information even includes the clustering tree between samples.
This information is usually stored as part of the column names in the
metadata part or abundance information of the itol.hub object.</p></dd>


<dt>common_themes</dt>
<dd><p>These themes are used at high frequency in
different templates. These parameters are small in number but constitute some
common features of iTOL visual style settings, such as legend, margin, etc.</p></dd>


<dt>specific_themes</dt>
<dd><p>These themes are used only in specific
templates. The number of these parameters is very large. However, most of
them are used in only one template to control the style details of the
visualization. By unifying these parameters and calling them according to the
template type, users can perform secondary development and data processing
with a high degree of parameter aggregation without worrying too much about
the differences between different template types.</p></dd>


<dt>data</dt>
<dd><p>This slot contains a list of two data frames with the
nodes and tips data separately. The first column of the two data frames is
the node or tip id. If the input data contains range id, it would be
converted to node id by the convert_range_to_node function automatically.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,<span class="st">"tree_of_itol_templates.tree"</span>,package <span class="op">=</span> <span class="st">"itol.toolkit"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"template_groups"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"template_parameters_count"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># COLLAPSE</span></span></span>
<span class="r-in"><span><span class="va">group_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">template_groups</span><span class="op">$</span><span class="va">group</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">object</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_hub.html">create_hub</a></span><span class="op">(</span>tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">unit</span> <span class="op">&lt;-</span> <span class="fu">create_unit</span><span class="op">(</span>data <span class="op">=</span> <span class="va">group_names</span>, key <span class="op">=</span> <span class="st">"E001_collapse_1"</span>,</span></span>
<span class="r-in"><span>type <span class="op">=</span> <span class="st">"COLLAPSE"</span>, tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">object</span> <span class="op">&lt;-</span> <span class="fu"><a href="learn_data_from_unit.html">learn_data_from_unit</a></span><span class="op">(</span><span class="va">object</span>,<span class="va">unit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># PRUNE</span></span></span>
<span class="r-in"><span><span class="va">select_note</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"theme_style"</span>,<span class="st">"basic_plot"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">unit</span> <span class="op">&lt;-</span> <span class="fu">create_unit</span><span class="op">(</span>data <span class="op">=</span> <span class="va">select_note</span>, key <span class="op">=</span> <span class="st">"E002_prune_1"</span>,</span></span>
<span class="r-in"><span>type <span class="op">=</span> <span class="st">"PRUNE"</span>, tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">object</span> <span class="op">&lt;-</span> <span class="fu"><a href="learn_data_from_unit.html">learn_data_from_unit</a></span><span class="op">(</span><span class="va">object</span>,<span class="va">unit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># SPACING</span></span></span>
<span class="r-in"><span><span class="va">df_values</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/row.names.html" class="external-link">row.names</a></span><span class="op">(</span><span class="va">template_parameters_count</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">template_parameters_count</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">unit</span> <span class="op">&lt;-</span> <span class="fu">create_unit</span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_values</span>, key <span class="op">=</span> <span class="st">"E005_spacing_1"</span>,</span></span>
<span class="r-in"><span>type <span class="op">=</span> <span class="st">"SPACING"</span>, tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">object</span> <span class="op">&lt;-</span> <span class="fu"><a href="learn_data_from_unit.html">learn_data_from_unit</a></span><span class="op">(</span><span class="va">object</span>,<span class="va">unit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># TREE_COLORS</span></span></span>
<span class="r-in"><span><span class="co">## range</span></span></span>
<span class="r-in"><span><span class="va">unit</span> <span class="op">&lt;-</span> <span class="fu">create_unit</span><span class="op">(</span>data <span class="op">=</span> <span class="va">template_groups</span>,</span></span>
<span class="r-in"><span>key <span class="op">=</span> <span class="st">"E006_tree_colors_1"</span>, type <span class="op">=</span> <span class="st">"TREE_COLORS"</span>, subtype <span class="op">=</span> <span class="st">"range"</span>,</span></span>
<span class="r-in"><span>tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using the first column as id: template</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in summarise_all(., n_distinct):</span> could not find function "summarise_all"</span>
<span class="r-in"><span><span class="va">object</span> <span class="op">&lt;-</span> <span class="fu"><a href="learn_data_from_unit.html">learn_data_from_unit</a></span><span class="op">(</span><span class="va">object</span>,<span class="va">unit</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tong Zhou.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

