<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TREE_COLORS • itol.toolkit</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="TREE_COLORS">
<meta property="og:description" content="itol.toolkit">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">itol.toolkit</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/Get_Start.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Single Functions
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Tree Structure</li>
    <li>
      <a href="../articles/COLLAPSE.html">COLLAPSE</a>
    </li>
    <li>
      <a href="../articles/PRUNE.html">PRUNE</a>
    </li>
    <li>
      <a href="../articles/SPACING.html">SPACING</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Theme Style</li>
    <li>
      <a href="../articles/TREE_COLORS.html">TREE_COLORS</a>
    </li>
    <li>
      <a href="../articles/DATASET_STYLE.html">DATASET_STYLE</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Text</li>
    <li>
      <a href="../articles/LABELS.html">LABELS</a>
    </li>
    <li>
      <a href="../articles/DATASET_TEXT.html">DATASET_TEXT</a>
    </li>
    <li>
      <a href="../articles/DATASET_COLORSTRIP.html">DATASET_COLORSTRIP</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Basic Plot</li>
    <li>
      <a href="../articles/DATASET_BINARY.html">DATASET_BINARY</a>
    </li>
    <li>
      <a href="../articles/DATASET_GRADIENT.html">DATASET_GRADIENT</a>
    </li>
    <li>
      <a href="../articles/DATASET_HEATMAP.html">DATASET_HEATMAP</a>
    </li>
    <li>
      <a href="../articles/DATASET_SYMBOL.html">DATASET_SYMBOL</a>
    </li>
    <li>
      <a href="../articles/DATASET_EXTERNALSHAPE.html">DATASET_EXTERNALSHAPE</a>
    </li>
    <li>
      <a href="../articles/DATASET_DOMAINS.html">DATASET_DOMAINS</a>
    </li>
    <li>
      <a href="../articles/DATASET_SIMPLEBAR.html">DATASET_SIMPLEBAR</a>
    </li>
    <li>
      <a href="../articles/DATASET_MULTIBAR.html">DATASET_MULTIBAR</a>
    </li>
    <li>
      <a href="../articles/DATASET_BOXPLOT.html">DATASET_BOXPLOT</a>
    </li>
    <li>
      <a href="../articles/DATASET_LINECHART.html">DATASET_LINECHART</a>
    </li>
    <li>
      <a href="../articles/DATASET_PIECHART.html">DATASET_PIECHART</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Advanced Plot</li>
    <li>
      <a href="../articles/DATASET_ALIGNMENT.html">DATASET_ALIGNMENT</a>
    </li>
    <li>
      <a href="../articles/DATASET_CONNECTIONS.html">DATASET_CONNECTIONS</a>
    </li>
    <li>
      <a href="../articles/DATASET_IMAGE.html">DATASET_IMAGE</a>
    </li>
    <li>
      <a href="../articles/POPUP_INFO.html">POPUP_INFO</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tips
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/OVERVIEW_TREE_STRUCTURE.html">Overview</a>
    </li>
    <li>
      <a href="../articles/Installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/Datasets.html">Datasets</a>
    </li>
    <li>
      <a href="../articles/Color_Palette.html">Colors</a>
    </li>
    <li>
      <a href="../articles/Data_Reproduction.html">Data Reproduction</a>
    </li>
    <li>
      <a href="../articles/Comparison_table2itol.html">vs table2itol</a>
    </li>
    <li>
      <a href="../articles/tree_construction.html">Tree Construction</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://tongzhou2017.github.io/itol.toolkit-gallery/" class="external-link">Gallery</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/TongZhou2017/itol.toolkit" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discord.com/invite/n5TC7jCfGJ" class="external-link">
    <span class="fab fa-discord fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/itol_toolkit" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>TREE_COLORS</h1>
                        <h4 data-toc-skip class="author">Longzhao Li<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>, Zhongyi
Hua<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>,
Tong Zhou<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>
</h4>
            
      
      
      <div class="hidden name"><code>TREE_COLORS.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>TREE_COLORS</code> allows you to set the style of branches
at any level. It has five attributes: “range”, “clade”, “branch”,
“label”, and “label_background”. While style parameters is simple of
<code>TREE_COLORS</code>, the data parameters are extremely complex. The
<code>Style</code> template belongs to the “Tree structure” class (refer
to the <a href="">Class</a> for detail information).</p>
<p>To set the style of a branch or node, users must enter the name of
the branch tip or node and the attribute such as color, label, style,
and size.The selected branch will then display the new styles as defined
by the specified attribute. Although this function provides the most
comprehensive templates for modifying tree style, its complexity in data
parameters proves to be a great challenge for users.</p>
<p>This section shows how to use itol.toolkit to modify the style. The
itol.toolkit significantly reduces the difficulty level for using iTOL
by enabling automatic data recognition. Without itol.toolkit, users
would have to organize various attribute parameters and their
corresponding input data manually. With the itol.toolkit, the entire
workflow becomes more cohesive, and users can directly output the
template files once they have confirmed which data to use.</p>
</div>
<div class="section level2">
<h2 id="regular-flow">Regular flow<a class="anchor" aria-label="anchor" href="#regular-flow"></a>
</h2>
<p>This section uses <a href="https://github.com/TongZhou2017/itol.toolkit/tree/master/inst/extdata/dataset1" class="external-link">dataset
1</a> as an example to show how to draw the line chart. (refer to the <a href="https://tongzhou2017.github.io/itol.toolkit/articles/Datasets.html" class="external-link">Dataset</a>
for detail information)</p>
<div class="section level3">
<h3 id="load-data">Load data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h3>
<p>The first step is to load the <code>newick</code> format tree file
<code>tree_of_itol_templates.tree</code> and its corresponding metadata
<code>df_frequence</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">itol.toolkit</span><span class="op">)</span></span>
<span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,</span>
<span>                    <span class="st">"tree_of_itol_templates.tree"</span>,</span>
<span>                    package <span class="op">=</span> <span class="st">"itol.toolkit"</span><span class="op">)</span></span>
<span><span class="va">hub</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_hub.html">create_hub</a></span><span class="op">(</span>tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"template_groups"</span><span class="op">)</span></span></code></pre></div>
<p>If the user enters all four columns, the program will figure out
which is the subclass and which is the color.</p>
<p>We can use the “range” attribute to set color of the tip label area.
Unlike the “label_background” attribute, the “range” attribute color
action range is consistent in the area of each label. In
<code>unit_7</code>, we only use two columns to show hot use these
function. The attribute are fed to the <code>subtype</code> parameter.
Based on the input data, the <code>create_unit</code> function treat the
first column as tip id, and the second columns as the “range”
information (whatever the header is). Moreover, the color is also
generated by the second column of input data. Also, colors can be
defined using the <code>color</code> parameter. As a result, the program
has handle all possible cases automatically, lowering the threshold at
which users are preparing for input data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unit_7</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_unit.html">create_unit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">template_groups</span>, </span>
<span>                      key <span class="op">=</span> <span class="st">"E007_tree_colors_1"</span>, </span>
<span>                      type <span class="op">=</span> <span class="st">"TREE_COLORS"</span>, </span>
<span>                      subtype <span class="op">=</span> <span class="st">"range"</span>, </span>
<span>                      tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/write_unit.html">write_unit</a></span><span class="op">(</span><span class="va">unit_7</span><span class="op">)</span></span></code></pre></div>
<p><img src="images/TREE_COLORS_1.png"></p>
<p>We can use the “clade” attribute to apply color adjustments to all
branches contained in a node . Like <code>unit_7</code>, we used only 2
columns data to implement the “branch” attribute in <code>unit_8</code>.
The attribute are fed to the <code>subtype</code> parameter. The line
type is defined by the <code>line_type</code> parameter, which controls
whether the line is a dotted line or not, and here we define the
different line types as a set of vectors. The line thickness is defined
by the <code>size_factor</code> parameter.</p>
<p>In <code>unit_8</code>, five discrete colors are generated according
to the second column of input data, which has five groups. Colors can
also be defined using the color parameter.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">template_groups</span><span class="op">$</span><span class="va">group</span><span class="op">)</span>, </span>
<span>                      data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">template_groups</span><span class="op">$</span><span class="va">group</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">unit_8</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_unit.html">create_unit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_data</span>, </span>
<span>                      key <span class="op">=</span> <span class="st">"E008_tree_colors_2"</span>, </span>
<span>                      type <span class="op">=</span> <span class="st">"TREE_COLORS"</span>, </span>
<span>                      subtype <span class="op">=</span> <span class="st">"clade"</span>, </span>
<span>                      line_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"normal"</span>,<span class="fl">4</span><span class="op">)</span>,<span class="st">"dashed"</span><span class="op">)</span>,</span>
<span>                      size_factor <span class="op">=</span> <span class="fl">5</span>, </span>
<span>                      tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/write_unit.html">write_unit</a></span><span class="op">(</span><span class="va">unit_8</span><span class="op">)</span></span></code></pre></div>
<p><img src="images/TREE_COLORS_2.png"></p>
<p>We can use the “branch” attribute to adjust color of the node or tip
like “clade” attribute. However, “branch” attribute does not broadcast
these settings to its offspring branches. See <code>unit_9</code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unit_9</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_unit.html">create_unit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_data</span>, </span>
<span>                      key <span class="op">=</span> <span class="st">"E009_tree_colors_3"</span>, </span>
<span>                      type <span class="op">=</span> <span class="st">"TREE_COLORS"</span>, </span>
<span>                      subtype <span class="op">=</span> <span class="st">"branch"</span>, </span>
<span>                      line_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"normal"</span>,<span class="fl">4</span><span class="op">)</span>,<span class="st">"dashed"</span><span class="op">)</span>,</span>
<span>                      size_factor <span class="op">=</span> <span class="fl">5</span>, </span>
<span>                      tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/write_unit.html">write_unit</a></span><span class="op">(</span><span class="va">unit_9</span><span class="op">)</span></span></code></pre></div>
<p><img src="images/TREE_COLORS_3.png"></p>
<p>We can use “label” attribute to adjust colors and font styles at the
branch level. We also used only 2 columns data to implement the “branch”
attribute in <code>unit_10</code>. The font type is defined by the
<code>font_type parameter</code>, which controls whether the lines are
bold or italic; The font size is defined by the <code>size_factor</code>
parameter.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unit_10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_unit.html">create_unit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">template_groups</span>,</span>
<span>                       key <span class="op">=</span> <span class="st">"E010_tree_colors_4"</span>, </span>
<span>                       type <span class="op">=</span> <span class="st">"TREE_COLORS"</span>, </span>
<span>                       subtype <span class="op">=</span> <span class="st">"label"</span>, </span>
<span>                       font_type <span class="op">=</span> <span class="st">"bold-italic"</span>,</span>
<span>                       size_factor <span class="op">=</span> <span class="fl">2</span>, </span>
<span>                       tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/write_unit.html">write_unit</a></span><span class="op">(</span><span class="va">unit_10</span><span class="op">)</span></span></code></pre></div>
<p><img src="images/TREE_COLORS_4.png"></p>
<p>We can use the “label_background” attribute to adjust the color
scheme of the label background at the branch level. We only used 2
columns of information to show how to implement the “label_background”
attribute in <code>unit_11</code>. Usually, the background is a uniform
color, so the color parameter defines a single color. However, you can
set different colors by entering a vector of colors. If no color was
set, <code>itol.toolkit</code> will automatically set colors based on
the data. In practice, it’s important to note that backgrounds often
don’t work the first time you drag them into iTOL, and you need to
switch between the ring, rectangle, and unrooted tree types to make them
work.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unit_11</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_unit.html">create_unit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">template_groups</span>, </span>
<span>                       key <span class="op">=</span> <span class="st">"E011_tree_colors_5"</span>, </span>
<span>                       type <span class="op">=</span> <span class="st">"TREE_COLORS"</span>, </span>
<span>                       subtype <span class="op">=</span> <span class="st">"label_background"</span>,</span>
<span>                       color <span class="op">=</span> <span class="st">"#000000"</span>, </span>
<span>                       tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/write_unit.html">write_unit</a></span><span class="op">(</span><span class="va">unit_11</span><span class="op">)</span></span></code></pre></div>
<p><img src="images/TREE_COLORS_5.png"></p>
<p>Of all templates, <code>TREE_COLORS</code> is one of the most
frequently used function and highly recommended by authors. The
itol.toolkit enables users to make fewer mistakes, and save effort in
complex function and data preparation.</p>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>IOCAS, <a href="mailto:2575760336@qq.com" class="email">2575760336@qq.com</a><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>CACMS, <a href="mailto:njbxhzy@hotmail.com" class="email">njbxhzy@hotmail.com</a><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>IOCAS, <a href="mailto:tongzhou2017@gmail.com" class="email">tongzhou2017@gmail.com</a><a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Tong Zhou.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
