<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>DATASET_TEXT • itol.toolkit</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="DATASET_TEXT">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">itol.toolkit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/Get_Start.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-single-functions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Single Functions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-single-functions">
<li><h6 class="dropdown-header" data-toc-skip>Tree Structure</h6></li>
    <li><a class="dropdown-item" href="../articles/COLLAPSE.html">COLLAPSE</a></li>
    <li><a class="dropdown-item" href="../articles/PRUNE.html">PRUNE</a></li>
    <li><a class="dropdown-item" href="../articles/SPACING.html">SPACING</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Theme Style</h6></li>
    <li><a class="dropdown-item" href="../articles/TREE_COLORS.html">TREE_COLORS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_STYLE.html">DATASET_STYLE</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Text</h6></li>
    <li><a class="dropdown-item" href="../articles/LABELS.html">LABELS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_TEXT.html">DATASET_TEXT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_COLORSTRIP.html">DATASET_COLORSTRIP</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Basic Plot</h6></li>
    <li><a class="dropdown-item" href="../articles/DATASET_BINARY.html">DATASET_BINARY</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_GRADIENT.html">DATASET_GRADIENT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_HEATMAP.html">DATASET_HEATMAP</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_SYMBOL.html">DATASET_SYMBOL</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_EXTERNALSHAPE.html">DATASET_EXTERNALSHAPE</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_DOMAINS.html">DATASET_DOMAINS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_SIMPLEBAR.html">DATASET_SIMPLEBAR</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_MULTIBAR.html">DATASET_MULTIBAR</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_BOXPLOT.html">DATASET_BOXPLOT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_LINECHART.html">DATASET_LINECHART</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_PIECHART.html">DATASET_PIECHART</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Plot</h6></li>
    <li><a class="dropdown-item" href="../articles/DATASET_ALIGNMENT.html">DATASET_ALIGNMENT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_CONNECTIONS.html">DATASET_CONNECTIONS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_IMAGE.html">DATASET_IMAGE</a></li>
    <li><a class="dropdown-item" href="../articles/POPUP_INFO.html">POPUP_INFO</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tips" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tips</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tips">
<li><a class="dropdown-item" href="../articles/OVERVIEW_TREE_STRUCTURE.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Installation</a></li>
    <li><a class="dropdown-item" href="../articles/Datasets.html">Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/Color_Palette.html">Colors</a></li>
    <li><a class="dropdown-item" href="../articles/Data_Reproduction.html">Data Reproduction</a></li>
    <li><a class="dropdown-item" href="../articles/Comparison_table2itol.html">vs table2itol</a></li>
    <li><a class="dropdown-item" href="../articles/tree_construction.html">Tree Construction</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Version history</h6></li>
    <li><a class="dropdown-item" href="../articles/v1.1.9.html">version 1.1.9</a></li>
    <li><a class="dropdown-item" href="../articles/v1.1.10.html">version 1.1.10</a></li>
    <li><a class="dropdown-item" href="../articles/v1.1.11.html">version 1.1.11</a></li>
    <li><a class="dropdown-item" href="../articles/v1.1.12.html">version 1.1.12</a></li>
    <li><a class="dropdown-item" href="../articles/v1.2.0.html">version 1.2.0</a></li>
    <li><a class="dropdown-item" href="../articles/v1.2.1.html">version 1.2.1</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="https://tongzhou2017.github.io/itol.toolkit-gallery/">Gallery</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/TongZhou2017/itol.toolkit" aria-label="GitHub repository"><span class="fa fa-github"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://discord.com/invite/n5TC7jCfGJ" aria-label="Discord community"><span class="fa fab fa-discord fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/itol_toolkit" aria-label="Twitter profile"><span class="fa fa-twitter"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>DATASET_TEXT</h1>
                        <h4 data-toc-skip class="author">Weiyue Liu<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;IOCAS, &lt;a href="mailto:weiyLiu@outlook.com" class="email"&gt;weiyLiu@outlook.com&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a>, Zhongyi
Hua<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;CACMS, &lt;a href="mailto:njbxhzy@hotmail.com" class="email"&gt;njbxhzy@hotmail.com&lt;/a&gt;&lt;/p&gt;'><sup>2</sup></a>,
Tong Zhou<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;IOCAS, &lt;a href="mailto:tongzhou2017@gmail.com" class="email"&gt;tongzhou2017@gmail.com&lt;/a&gt;&lt;/p&gt;'><sup>3</sup></a>
</h4>
            
            <h4 data-toc-skip class="date">Last compiled on 21
September, 2025</h4>
      

      <div class="d-none name"><code>DATASET_TEXT.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The function of the <code>DATASET_TEXT</code> template is to
associate each tree node with a single text either displayed on the
branch or outside the node. For each label, the exact position, color,
font style, size factor and degree of rotation can be specified. The
<code>DATASET_TEXT</code> template belongs to the “Text” class (refer to
the <a href="">Class</a> for detail information).</p>
<p>Typically, users need add text labels by specifying label text,
position, color, style, size, and rotation angle for each node. Without
itol.toolkit, users need input these information manually, reducing the
efficiency of data processing and visualization preparation. The
itol.toolkit allows users to complete visualization preparation more
efficiently, especially by automatically generating color information
based on the data. Moreover itol.toolkit retains the ability to set
colors manually to meet most of users’ needs.</p>
</div>
<div class="section level2">
<h2 id="text-label">Text Label<a class="anchor" aria-label="anchor" href="#text-label"></a>
</h2>
<p>This section uses <a href="https://github.com/TongZhou2017/itol.toolkit/tree/master/inst/extdata/dataset1" class="external-link">dataset
1</a> to demonstrate adding text labels to the tree (refer to the <a href="https://tongzhou2017.github.io/itol.toolkit/articles/Datasets.html">Dataset</a>
for detail information).</p>
<p>The first step is to load the newick format tree file
“tree_of_itol_templates.tree”. The purpose of data processing in this
section is to add some text labels at specific locations in the tree.
.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tongzhou2017.github.io/itol.toolkit/">itol.toolkit</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,</span>
<span>                    <span class="st">"tree_of_itol_templates.tree"</span>,</span>
<span>                    package <span class="op">=</span> <span class="st">"itol.toolkit"</span><span class="op">)</span></span></code></pre></div>
<p>Next we need to prepare the input data by storing it in a data frame
with the first column containing the node ID, the second column
containing the corresponding text, and the third column containing the
group data for automatic color configuration.</p>
<p>In the case of data without the third column, the program will add
colors automatically. Without setting the “color” parameter, itol.tookit
will use the default palette (refer to <a href="https://tongzhou2017.github.io/itol.toolkit/articles/Color_Palette.html">Color_Palette</a>
for detail information). Moreover, several other styles of text can be
specified by users, which are described as follows:</p>
<ul>
<li><p>size_factor: size of text labels</p></li>
<li><p>rotation: rotation angle of the text label</p></li>
<li><p>position: -1, external label; a number between 0 and 1,
specifying the ratio of the branch length where the center of the label
should be positioned (ie. position 0 is exactly at the start of node
branch, 0.5 is in the middle, and 1 is at the end).</p></li>
<li><p>font_type: style of the font, can be normal, bold, italic or
bold-italic</p></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="st">"I1"</span>,</span>
<span>                      text <span class="op">=</span> <span class="st">"itol.toolkit"</span>,</span>
<span>                      data<span class="op">=</span><span class="st">"any"</span><span class="op">)</span></span>
<span><span class="va">unit_18</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_unit.html">create_unit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_data</span>,</span>
<span>                       key <span class="op">=</span> <span class="st">"E018_text_1"</span>,</span>
<span>                       type <span class="op">=</span> <span class="st">"DATASET_TEXT"</span>,</span>
<span>                       size_factor <span class="op">=</span> <span class="fl">6</span>,</span>
<span>                       rotation <span class="op">=</span> <span class="fl">66</span>,</span>
<span>                       tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/write_unit.html">write_unit</a></span><span class="op">(</span><span class="va">unit_18</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="images/DATASET_TEXT_1.png" alt=""><p class="caption">Text visualization example 1</p>
</div>
<p>Users can input data with only only two columns(i.e., node ID and
text), and set the color manually through the “color” parameter.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="st">"I1"</span>, text <span class="op">=</span> <span class="st">"itol.toolkit"</span><span class="op">)</span></span>
<span><span class="va">unit_19</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_unit.html">create_unit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_data</span>,</span>
<span>                       key <span class="op">=</span> <span class="st">"E019_text_2"</span>,</span>
<span>                       type <span class="op">=</span> <span class="st">"DATASET_TEXT"</span>,</span>
<span>                       size_factor <span class="op">=</span> <span class="fl">6</span>,</span>
<span>                       rotation<span class="op">=</span><span class="fl">66</span>,</span>
<span>                       color <span class="op">=</span> <span class="st">"#0000FF"</span>,</span>
<span>                       tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/write_unit.html">write_unit</a></span><span class="op">(</span><span class="va">unit_19</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="images/DATASET_TEXT_2.png" alt=""><p class="caption">Text visualization example 2</p>
</div>
<p>Users can define multi-style text by adding different tags to the
text:</p>
<ul>
<li><p>&lt;n&gt; &lt;/n&gt; : normal text</p></li>
<li><p>&lt;b&gt; &lt;/b&gt; : bold</p></li>
<li><p>&lt;i&gt; &lt;/i&gt; : italic</p></li>
<li><p>&lt;bi&gt; &lt;/bi&gt; : bold italic</p></li>
<li><p>&lt;sub&gt; &lt;/sub&gt; : subscript</p></li>
<li><p>&lt;sup&gt; &lt;/sup&gt; : superscript</p></li>
</ul>
<p>All parts of the label must be enclosed by one of the possible tags,
including any space characters.</p>
<p>Each tag can be expanded with additional attributes:</p>
<ul>
<li><p>color: define a specific color for this part of the
label</p></li>
<li><p>size: define a size factor (e.g. 0.5 would make this part half
the size)</p></li>
<li><p>font: define a specific font family for this part of the
label</p></li>
</ul>
<p>Multiple styles can be used only on external labels (ie. position is
set to -1), and that are not aligned to the tree.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="st">"DATASET_COLORSTRIP"</span>, text <span class="op">=</span> <span class="st">'&lt;i color="#0000FF"&gt;itol.&lt;/i&gt;&lt;b&gt;toolkit&lt;/b&gt;'</span><span class="op">)</span></span>
<span><span class="va">unit_20</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_unit.html">create_unit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_data</span>,</span>
<span>                       key <span class="op">=</span> <span class="st">"E020_text_3"</span>,</span>
<span>                       type <span class="op">=</span> <span class="st">"DATASET_TEXT"</span>,</span>
<span>                       size_factor <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                       rotation <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                       position <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>                       color <span class="op">=</span> <span class="st">"#000000"</span>,</span>
<span>                       tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/write_unit.html">write_unit</a></span><span class="op">(</span><span class="va">unit_20</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="images/DATASET_TEXT_3.png" alt=""><p class="caption">Text visualization example 3</p>
</div>
</div>
<div class="section level2">
<h2 id="style-modification">Style modification<a class="anchor" aria-label="anchor" href="#style-modification"></a>
</h2>
<p>Users can adjust the position of the text label with the following
variables:</p>
<ul>
<li><p><code>unit@common_themes$label$vertical</code>: Shift internal
labels vertically by this amount of pixels (positive or
negative)</p></li>
<li><p><code>unit@common_themes$label$below</code>: By default, internal
labels will be placed above the branches. If LABELS_BELOW is set to 1,
labels will be below the branches</p></li>
<li><p><code>unit_18@common_themes$label$straight</code>: If set to 1,
tree rotation will not influence the individual label rotation</p></li>
</ul>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tong Zhou.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
