<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DATASET_DOMAINS • itol.toolkit</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="DATASET_DOMAINS">
<meta property="og:description" content="itol.toolkit">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">itol.toolkit</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/Get_Start.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Single Functions
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Tree Structure</li>
    <li>
      <a href="../articles/COLLAPSE.html">COLLAPSE</a>
    </li>
    <li>
      <a href="../articles/PRUNE.html">PRUNE</a>
    </li>
    <li>
      <a href="../articles/SPACING.html">SPACING</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Theme Style</li>
    <li>
      <a href="../articles/TREE_COLORS.html">TREE_COLORS</a>
    </li>
    <li>
      <a href="../articles/DATASET_STYLE.html">DATASET_STYLE</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Text</li>
    <li>
      <a href="../articles/LABELS.html">LABELS</a>
    </li>
    <li>
      <a href="../articles/DATASET_TEXT.html">DATASET_TEXT</a>
    </li>
    <li>
      <a href="../articles/DATASET_COLORSTRIP.html">DATASET_COLORSTRIP</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Basic Plot</li>
    <li>
      <a href="../articles/DATASET_BINARY.html">DATASET_BINARY</a>
    </li>
    <li>
      <a href="../articles/DATASET_GRADIENT.html">DATASET_GRADIENT</a>
    </li>
    <li>
      <a href="../articles/DATASET_HEATMAP.html">DATASET_HEATMAP</a>
    </li>
    <li>
      <a href="../articles/DATASET_SYMBOL.html">DATASET_SYMBOL</a>
    </li>
    <li>
      <a href="../articles/DATASET_EXTERNALSHAPE.html">DATASET_EXTERNALSHAPE</a>
    </li>
    <li>
      <a href="../articles/DATASET_DOMAINS.html">DATASET_DOMAINS</a>
    </li>
    <li>
      <a href="../articles/DATASET_SIMPLEBAR.html">DATASET_SIMPLEBAR</a>
    </li>
    <li>
      <a href="../articles/DATASET_MULTIBAR.html">DATASET_MULTIBAR</a>
    </li>
    <li>
      <a href="../articles/DATASET_BOXPLOT.html">DATASET_BOXPLOT</a>
    </li>
    <li>
      <a href="../articles/DATASET_LINECHART.html">DATASET_LINECHART</a>
    </li>
    <li>
      <a href="../articles/DATASET_PIECHART.html">DATASET_PIECHART</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Advanced Plot</li>
    <li>
      <a href="../articles/DATASET_ALIGNMENT.html">DATASET_ALIGNMENT</a>
    </li>
    <li>
      <a href="../articles/DATASET_CONNECTIONS.html">DATASET_CONNECTIONS</a>
    </li>
    <li>
      <a href="../articles/DATASET_IMAGE.html">DATASET_IMAGE</a>
    </li>
    <li>
      <a href="../articles/POPUP_INFO.html">POPUP_INFO</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tips
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/OVERVIEW_TREE_STRUCTURE.html">Overview</a>
    </li>
    <li>
      <a href="../articles/Installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/Datasets.html">Datasets</a>
    </li>
    <li>
      <a href="../articles/Color_Palette.html">Colors</a>
    </li>
    <li>
      <a href="../articles/Data_Reproduction.html">Data Reproduction</a>
    </li>
    <li>
      <a href="../articles/Comparison_table2itol.html">vs table2itol</a>
    </li>
    <li>
      <a href="../articles/tree_construction.html">Tree Construction</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://tongzhou2017.github.io/itol.toolkit-gallery/" class="external-link">Gallery</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/TongZhou2017/itol.toolkit" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discord.com/invite/n5TC7jCfGJ" class="external-link">
    <span class="fab fa-discord fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/itol_toolkit" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>DATASET_DOMAINS</h1>
                        <h4 data-toc-skip class="author">Weiyue Liu<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>, Zhongyi
Hua<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>,
Tong Zhou<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>
</h4>
            
            <h4 data-toc-skip class="date">Last compiled on 07 May,
2023</h4>
      
      
      <div class="hidden name"><code>DATASET_DOMAINS.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>DATASET_DOMAIN</code> template are used to visualize
schematic representations of proteins, with a protein backbone and
various shapes depicting the locations of individual domains. Even
though its primary use is for the display of protein domain
architectures, it can be used for various other purposes, as it offers a
lot of flexibility. The <code>DATASET_DOMAIN</code> template belongs to
the “Basic graphics” class (refer to the <a href="">Class</a> for detail
information).</p>
<p>To add a schematic representation of a protein to its branch, users
must input the branch name, protein length, marker shape, start and end
position, color, and label for each structural domain.</p>
<p>This section shows how to use the itol.toolkit to add schematic
representations of proteins to the tree. Without
<code>itol.toolkit</code>, users need to manually input information such
as the color and the shape of protein domains one by one. When faced
with a large amount of data, this process is very time consuming. The
itol.toolkit simplifies the data processing procedure and integrates it
seamlessly with visual preparation. To use the itol.toolkit, users need
to prepare the label, length, start, and end position of the
corresponding protein domain for each tip, as the program automatically
sets the shape and color.</p>
</div>
<div class="section level2">
<h2 id="draw-schematic-representation-of-protein">Draw schematic representation of protein<a class="anchor" aria-label="anchor" href="#draw-schematic-representation-of-protein"></a>
</h2>
<p>This section uses <a href="https://github.com/TongZhou2017/itol.toolkit/tree/master/inst/extdata/dataset1" class="external-link">dataset
1</a> to show the visualization of schematic representations of proteins
(refer to the <a href="https://tongzhou2017.github.io/itol.toolkit/articles/Datasets.html" class="external-link">Dataset</a>
for detail information).</p>
<p>The first step is to load the <code>newick</code> format tree file
<code>tree_of_itol_templates.tree</code> and its corresponding metadata
<code>parameter_usage_raw.txt</code>. The following example data
<code>parameter_usage_raw.txt</code> contains the types of parameters
and their usage in each template.</p>
<p>The purpose of our data processing in this section is to demonstrate
the use of various types of parameters in various templates using
schematic representation of protein.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">itol.toolkit</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,</span>
<span>                    <span class="st">"tree_of_itol_templates.tree"</span>,</span>
<span>                    package <span class="op">=</span> <span class="st">"itol.toolkit"</span><span class="op">)</span></span>
<span><span class="va">tab_tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,</span>
<span>                       <span class="st">"parameter_groups.txt"</span>,</span>
<span>                       package <span class="op">=</span> <span class="st">"itol.toolkit"</span><span class="op">)</span></span>
<span><span class="va">tab_tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="va">tab_tmp</span><span class="op">)</span></span></code></pre></div>
<p>We represent protein domains using the type of parameter and
determine the length of each domain by the number of parameters used by
the template for that type. The final result of our data processing is
shown in variable <code>template_end_group_long</code>. The first column
is the template names (corresponding to the tips of the tree), the
second column is the length of the protein domain, the three and four
columns are the starting and ending positions of the protein domain, and
the fifth column is the parameter types (i.e., the domain label).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tab_id_group</span> <span class="op">&lt;-</span> <span class="va">tab_tmp</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">tab_tmp</span> <span class="op">&lt;-</span> <span class="va">tab_tmp</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">tab_tmp_01</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convert_01.html">convert_01</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">tab_tmp</span><span class="op">)</span></span>
<span><span class="va">tab_tmp_01</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">tab_id_group</span>,<span class="va">tab_tmp_01</span><span class="op">)</span></span>
<span><span class="va">para_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"type"</span>,</span>
<span>                <span class="st">"separator"</span>,</span>
<span>                <span class="st">"profile"</span>,</span>
<span>                <span class="st">"field"</span>,</span>
<span>                <span class="st">"common themes"</span>,</span>
<span>                <span class="st">"specific themes"</span>,</span>
<span>                <span class="st">"data"</span><span class="op">)</span></span>
<span><span class="va">template_with_start</span> <span class="op">&lt;-</span> <span class="va">tab_tmp_01</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'parameter'</span>, <span class="st">'group'</span><span class="op">)</span>, </span>
<span>                                names_to <span class="op">=</span> <span class="st">'variable'</span>,</span>
<span>                                values_to <span class="op">=</span> <span class="st">'value'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">group</span>,<span class="va">variable</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>sublen <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html" class="external-link">spread</a></span><span class="op">(</span>key<span class="op">=</span><span class="va">variable</span>,</span>
<span>                          value<span class="op">=</span><span class="va">sublen</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>group<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">group</span>,levels <span class="op">=</span> <span class="va">order</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span></span>
<span><span class="va">group_start</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">template_with_start</span><span class="op">$</span><span class="va">group</span>, </span>
<span>                          Freq <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">template_with_start</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span>, <span class="va">max</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>start<span class="op">=</span><span class="fu">lag</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">Freq</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>start<span class="op">=</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html" class="external-link">replace_na</a></span><span class="op">(</span><span class="va">start</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">template_with_start_and_end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">template_with_start</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, </span>
<span>                                      <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="va">x</span> <span class="op">+</span> <span class="va">group_start</span><span class="op">$</span><span class="va">start</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>group<span class="op">=</span><span class="va">template_with_start</span><span class="op">$</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"group"</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">'variable'</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"end"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">group_start</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'group'</span>,<span class="st">'start'</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>length<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">group_start</span><span class="op">$</span><span class="va">Freq</span><span class="op">)</span>,</span>
<span>         group <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">group</span>, levels<span class="op">=</span><span class="va">para_order</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">length</span>, <span class="va">start</span>, <span class="va">end</span>, <span class="va">group</span><span class="op">)</span></span></code></pre></div>
<p>Using prepared data to create unit</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unit_28</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_unit.html">create_unit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">template_end_group_long</span>,</span>
<span>                       key <span class="op">=</span> <span class="st">"E028_domains_1"</span>,</span>
<span>                       type <span class="op">=</span> <span class="st">"DATASET_DOMAINS"</span>,</span>
<span>                       tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="style-modification">Style modification<a class="anchor" aria-label="anchor" href="#style-modification"></a>
</h2>
<p>Users can add a column to the long table used to generate templates
to change the shape of each protein domain. By assigning the domain
label column to a new column and using the
<code><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">stringr::str_replace_all</a></code> function to replace each label
with a shape, you can quickly modify the shape.</p>
<p>Domain shape codes are as follows:</p>
<table class="table">
<thead><tr class="header">
<th>Character</th>
<th>Shape</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>RE</td>
<td>rectangle</td>
</tr>
<tr class="even">
<td>HH</td>
<td>horizontal hexagon</td>
</tr>
<tr class="odd">
<td>HV</td>
<td>vertical hexagon</td>
</tr>
<tr class="even">
<td>EL</td>
<td>ellipse</td>
</tr>
<tr class="odd">
<td>DI</td>
<td>rhombus (diamond)</td>
</tr>
<tr class="even">
<td>TR</td>
<td>right pointing triangle</td>
</tr>
<tr class="odd">
<td>TL</td>
<td>left pointing triangle</td>
</tr>
<tr class="even">
<td>PL</td>
<td>left pointing pentagram</td>
</tr>
<tr class="odd">
<td>PR</td>
<td>right pointing pentagram</td>
</tr>
<tr class="even">
<td>PU</td>
<td>up pointing pentagram</td>
</tr>
<tr class="odd">
<td>PD</td>
<td>down pointing pentagram</td>
</tr>
<tr class="even">
<td>OC</td>
<td>octagon</td>
</tr>
<tr class="odd">
<td>GP</td>
<td>rectangle</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="va">template_end_group_long</span><span class="op">$</span><span class="va">group</span></span>
<span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span>,<span class="st">"type"</span>,<span class="st">"HH"</span><span class="op">)</span></span>
<span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span>,<span class="st">"separator"</span>,<span class="st">"HV"</span><span class="op">)</span></span>
<span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span>,<span class="st">"profile"</span>,<span class="st">"EL"</span><span class="op">)</span></span>
<span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span>,<span class="st">"field"</span>,<span class="st">"DI"</span><span class="op">)</span></span>
<span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span>,<span class="st">"common themes"</span>,<span class="st">"TR"</span><span class="op">)</span></span>
<span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span>,<span class="st">"specific themes"</span>,<span class="st">"TL"</span><span class="op">)</span></span>
<span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">template_end_group_long</span><span class="op">$</span><span class="va">shape</span>,<span class="st">"data"</span>,<span class="st">"PL"</span><span class="op">)</span></span></code></pre></div>
<p>我给你改的，供参考</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">group2shape</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">group</span>,               <span class="op">~</span><span class="va">shape</span>,</span>
<span>  <span class="st">"type"</span>,               <span class="st">"HH"</span>,</span>
<span>  <span class="st">"separator"</span>,          <span class="st">"HV"</span>,</span>
<span>  <span class="st">"profile"</span>,            <span class="st">"EL"</span>,</span>
<span>  <span class="st">"field"</span>,              <span class="st">"DI"</span>,</span>
<span>  <span class="st">"common themes"</span>,      <span class="st">"TR"</span>,</span>
<span>  <span class="st">"specific themes"</span>,    <span class="st">"TL"</span>,</span>
<span>  <span class="st">"data"</span>,               <span class="st">"PL"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">template_with_start_and_end</span>  <span class="op">%&lt;&gt;%</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">group2shape</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>IOCAS, <a href="mailto:weiyLiu@outlook.com" class="email">weiyLiu@outlook.com</a><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>CACMS, <a href="mailto:njbxhzy@hotmail.com" class="email">njbxhzy@hotmail.com</a><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>IOCAS, <a href="mailto:tongzhou2017@gmail.com" class="email">tongzhou2017@gmail.com</a><a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Tong Zhou.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
