<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>DATASET_DOMAINS • itol.toolkit</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="DATASET_DOMAINS">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">itol.toolkit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.11</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/Get_Start.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-single-functions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Single Functions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-single-functions">
<li><h6 class="dropdown-header" data-toc-skip>Tree Structure</h6></li>
    <li><a class="dropdown-item" href="../articles/COLLAPSE.html">COLLAPSE</a></li>
    <li><a class="dropdown-item" href="../articles/PRUNE.html">PRUNE</a></li>
    <li><a class="dropdown-item" href="../articles/SPACING.html">SPACING</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Theme Style</h6></li>
    <li><a class="dropdown-item" href="../articles/TREE_COLORS.html">TREE_COLORS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_STYLE.html">DATASET_STYLE</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Text</h6></li>
    <li><a class="dropdown-item" href="../articles/LABELS.html">LABELS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_TEXT.html">DATASET_TEXT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_COLORSTRIP.html">DATASET_COLORSTRIP</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Basic Plot</h6></li>
    <li><a class="dropdown-item" href="../articles/DATASET_BINARY.html">DATASET_BINARY</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_GRADIENT.html">DATASET_GRADIENT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_HEATMAP.html">DATASET_HEATMAP</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_SYMBOL.html">DATASET_SYMBOL</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_EXTERNALSHAPE.html">DATASET_EXTERNALSHAPE</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_DOMAINS.html">DATASET_DOMAINS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_SIMPLEBAR.html">DATASET_SIMPLEBAR</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_MULTIBAR.html">DATASET_MULTIBAR</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_BOXPLOT.html">DATASET_BOXPLOT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_LINECHART.html">DATASET_LINECHART</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_PIECHART.html">DATASET_PIECHART</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Plot</h6></li>
    <li><a class="dropdown-item" href="../articles/DATASET_ALIGNMENT.html">DATASET_ALIGNMENT</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_CONNECTIONS.html">DATASET_CONNECTIONS</a></li>
    <li><a class="dropdown-item" href="../articles/DATASET_IMAGE.html">DATASET_IMAGE</a></li>
    <li><a class="dropdown-item" href="../articles/POPUP_INFO.html">POPUP_INFO</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tips" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tips</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tips">
<li><a class="dropdown-item" href="../articles/OVERVIEW_TREE_STRUCTURE.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Installation</a></li>
    <li><a class="dropdown-item" href="../articles/Datasets.html">Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/Color_Palette.html">Colors</a></li>
    <li><a class="dropdown-item" href="../articles/Data_Reproduction.html">Data Reproduction</a></li>
    <li><a class="dropdown-item" href="../articles/Comparison_table2itol.html">vs table2itol</a></li>
    <li><a class="dropdown-item" href="../articles/tree_construction.html">Tree Construction</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Version history</h6></li>
    <li><a class="dropdown-item" href="../articles/v1.1.9.html">version 1.1.9</a></li>
    <li><a class="dropdown-item" href="../articles/v1.1.10.html">version 1.1.10</a></li>
    <li><a class="dropdown-item" href="../articles/v1.1.11.html">version 1.1.11</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="https://tongzhou2017.github.io/itol.toolkit-gallery/">Gallery</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/TongZhou2017/itol.toolkit" aria-label="GitHub repository"><span class="fa fa-github"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://discord.com/invite/n5TC7jCfGJ" aria-label="Discord community"><span class="fa fab fa-discord fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/itol_toolkit" aria-label="Twitter profile"><span class="fa fa-twitter"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>DATASET_DOMAINS</h1>
                        <h4 data-toc-skip class="author">Weiyue Liu<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;IOCAS, &lt;a href="mailto:weiyLiu@outlook.com" class="email"&gt;weiyLiu@outlook.com&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a>, Zhongyi
Hua<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;CACMS, &lt;a href="mailto:njbxhzy@hotmail.com" class="email"&gt;njbxhzy@hotmail.com&lt;/a&gt;&lt;/p&gt;'><sup>2</sup></a>,
Tong Zhou<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;IOCAS, &lt;a href="mailto:tongzhou2017@gmail.com" class="email"&gt;tongzhou2017@gmail.com&lt;/a&gt;&lt;/p&gt;'><sup>3</sup></a>
</h4>
            
            <h4 data-toc-skip class="date">Last compiled on 01
September, 2025</h4>
      

      <div class="d-none name"><code>DATASET_DOMAINS.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>DATASET_DOMAIN</code> template are used to visualize
schematic representations of proteins, with a protein backbone and
various shapes depicting the locations of individual domains. Even
though its primary use is for the display of protein domain
architectures, it can be used for various other purposes, as it offers a
lot of flexibility. The <code>DATASET_DOMAIN</code> template belongs to
the “Basic graphics” class (refer to the <a href="">Class</a> for detail
information).</p>
<p>To add a schematic representation of a protein to its branch, users
must input the branch name, protein length, marker shape, start and end
position, color, and label for each structural domain.</p>
<p>This section shows how to use the itol.toolkit to add schematic
representations of proteins to the tree. Without
<code>itol.toolkit</code>, users need to manually input information such
as the color and the shape of protein domains one by one. When faced
with a large amount of data, this process is very time consuming. The
itol.toolkit simplifies the data processing procedure and integrates it
seamlessly with visual preparation. To use the itol.toolkit, users need
to prepare the label, length, start, and end position of the
corresponding protein domain for each tip, as the program automatically
sets the shape and color.</p>
</div>
<div class="section level2">
<h2 id="draw-schematic-representation-of-protein">Draw schematic representation of protein<a class="anchor" aria-label="anchor" href="#draw-schematic-representation-of-protein"></a>
</h2>
<p>This section uses <a href="https://github.com/TongZhou2017/itol.toolkit/tree/master/inst/extdata/dataset1" class="external-link">dataset
1</a> to show the visualization of schematic representations of proteins
(refer to the <a href="https://tongzhou2017.github.io/itol.toolkit/articles/Datasets.html">Dataset</a>
for detail information).</p>
<p>The first step is to load the <code>newick</code> format tree file
<code>tree_of_itol_templates.tree</code> and its corresponding metadata
<code>parameter_usage_raw.txt</code>. The following example data
<code>parameter_usage_raw.txt</code> contains the types of parameters
and their usage in each template.</p>
<p>The purpose of our data processing in this section is to demonstrate
the use of various types of parameters in various templates using
schematic representation of protein.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tongzhou2017.github.io/itol.toolkit/">itol.toolkit</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,</span>
<span>                    <span class="st">"tree_of_itol_templates.tree"</span>,</span>
<span>                    package <span class="op">=</span> <span class="st">"itol.toolkit"</span><span class="op">)</span></span>
<span><span class="va">tab_tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,</span>
<span>                       <span class="st">"parameter_groups.txt"</span>,</span>
<span>                       package <span class="op">=</span> <span class="st">"itol.toolkit"</span><span class="op">)</span></span>
<span><span class="va">tab_tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="va">tab_tmp</span><span class="op">)</span></span></code></pre></div>
<p>We represent protein domains using the type of parameter and
determine the length of each domain by the number of parameters used by
the template for that type. The final result of our data processing is
shown in variable <code>template_end_group_long</code>. The first column
is the template names (corresponding to the tips of the tree), the
second column is the length of the protein domain, the three and four
columns are the starting and ending positions of the protein domain, and
the fifth column is the parameter types (i.e., the domain label).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tab_id_group</span> <span class="op">&lt;-</span> <span class="va">tab_tmp</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">tab_tmp</span> <span class="op">&lt;-</span> <span class="va">tab_tmp</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">tab_tmp_01</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convert_01.html">convert_01</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">tab_tmp</span><span class="op">)</span></span>
<span><span class="va">tab_tmp_01</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">tab_id_group</span>,<span class="va">tab_tmp_01</span><span class="op">)</span></span>
<span><span class="va">para_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"type"</span>,</span>
<span>                <span class="st">"separator"</span>,</span>
<span>                <span class="st">"profile"</span>,</span>
<span>                <span class="st">"field"</span>,</span>
<span>                <span class="st">"common themes"</span>,</span>
<span>                <span class="st">"specific themes"</span>,</span>
<span>                <span class="st">"data"</span><span class="op">)</span></span>
<span><span class="va">template_with_start</span> <span class="op">&lt;-</span> <span class="va">tab_tmp_01</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'parameter'</span>, <span class="st">'group'</span><span class="op">)</span>, </span>
<span>                                names_to <span class="op">=</span> <span class="st">'variable'</span>,</span>
<span>                                values_to <span class="op">=</span> <span class="st">'value'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">group</span>,<span class="va">variable</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>sublen <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html" class="external-link">spread</a></span><span class="op">(</span>key<span class="op">=</span><span class="va">variable</span>,</span>
<span>                          value<span class="op">=</span><span class="va">sublen</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>group<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">group</span>,levels <span class="op">=</span> <span class="va">para_order</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span></span>
<span><span class="va">group_start</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">template_with_start</span><span class="op">$</span><span class="va">group</span>, </span>
<span>                          Freq <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">template_with_start</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">1</span>, <span class="va">max</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>start<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">Freq</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>start<span class="op">=</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html" class="external-link">replace_na</a></span><span class="op">(</span><span class="va">start</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">template_with_start_and_end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">template_with_start</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, </span>
<span>                                      <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="va">x</span> <span class="op">+</span> <span class="va">group_start</span><span class="op">$</span><span class="va">start</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>group<span class="op">=</span><span class="va">template_with_start</span><span class="op">$</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"group"</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">'variable'</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"end"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">group_start</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'group'</span>,<span class="st">'start'</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>length<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">group_start</span><span class="op">$</span><span class="va">Freq</span><span class="op">)</span>,</span>
<span>         group <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">group</span>, levels<span class="op">=</span><span class="va">para_order</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">variable</span>, <span class="va">length</span>, <span class="va">start</span>, <span class="va">end</span>, <span class="va">group</span><span class="op">)</span></span>
<span></span>
<span><span class="va">group2shape</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">group</span>,               <span class="op">~</span><span class="va">shape</span>,</span>
<span>  <span class="st">"type"</span>,               <span class="st">"HH"</span>,</span>
<span>  <span class="st">"separator"</span>,          <span class="st">"HV"</span>,</span>
<span>  <span class="st">"profile"</span>,            <span class="st">"EL"</span>,</span>
<span>  <span class="st">"field"</span>,              <span class="st">"DI"</span>,</span>
<span>  <span class="st">"common themes"</span>,      <span class="st">"TR"</span>,</span>
<span>  <span class="st">"specific themes"</span>,    <span class="st">"TL"</span>,</span>
<span>  <span class="st">"data"</span>,               <span class="st">"PL"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">template_end_group_long</span> <span class="op">&lt;-</span> <span class="va">template_with_start_and_end</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">group2shape</span><span class="op">)</span></span></code></pre></div>
<p>Using prepared data to create unit</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unit_34</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_unit.html">create_unit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">template_end_group_long</span>,</span>
<span>                       key <span class="op">=</span> <span class="st">"E034_domains_1"</span>,</span>
<span>                       type <span class="op">=</span> <span class="st">"DATASET_DOMAINS"</span>,</span>
<span>                       tree <span class="op">=</span> <span class="va">tree</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="images/DATASET_DOMAINS_1.png" alt=""><p class="caption">Dataset domains visualization example</p>
</div>
</div>
<div class="section level2">
<h2 id="style-modification">Style modification<a class="anchor" aria-label="anchor" href="#style-modification"></a>
</h2>
<p>Users can add a column to the long table used to generate templates
to change the shape of each protein domain. By assigning the domain
label column to a new column and replace each label with a shape, you
can quickly modify the shape.</p>
<p>Domain shape codes are as follows:</p>
<table class="table">
<thead><tr class="header">
<th>Character</th>
<th>Shape</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>RE</td>
<td>rectangle</td>
</tr>
<tr class="even">
<td>HH</td>
<td>horizontal hexagon</td>
</tr>
<tr class="odd">
<td>HV</td>
<td>vertical hexagon</td>
</tr>
<tr class="even">
<td>EL</td>
<td>ellipse</td>
</tr>
<tr class="odd">
<td>DI</td>
<td>rhombus (diamond)</td>
</tr>
<tr class="even">
<td>TR</td>
<td>right pointing triangle</td>
</tr>
<tr class="odd">
<td>TL</td>
<td>left pointing triangle</td>
</tr>
<tr class="even">
<td>PL</td>
<td>left pointing pentagram</td>
</tr>
<tr class="odd">
<td>PR</td>
<td>right pointing pentagram</td>
</tr>
<tr class="even">
<td>PU</td>
<td>up pointing pentagram</td>
</tr>
<tr class="odd">
<td>PD</td>
<td>down pointing pentagram</td>
</tr>
<tr class="even">
<td>OC</td>
<td>octagon</td>
</tr>
<tr class="odd">
<td>GP</td>
<td>rectangle</td>
</tr>
</tbody>
</table>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tong Zhou.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
